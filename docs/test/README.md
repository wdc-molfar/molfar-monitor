# Програмний модуль **"molfar-monitor"** | Програма та методика випробувань

## Об'єкт випробувань

Об'єктом випробувань є **[`molfar-monitor`](https://github.com/wdc-molfar/molfar-monitor) – "Програмний модуль для моніторингу стану мікросервісів"**, який надає можливості для обробки запитів від мікросервісів для додавання їх до реєстру моніторингу, надсилання запитів до мікросервісів з метою визначити їх стан, доступність та працездатність, видаляти мікросервіси з реєстру моніторингу; а також призначений для управління мікросервісами, і зокрема дозволяє перенаправляти запити до [`molfar-node`](https://github.com/wdc-molfar/molfar-node) на розгортання, запуск, налаштування, зупинку та згортання мікросервісів.

## Мета випробувань

Перевірити надійність функціонування програмного модуля [`molfar-monitor`](https://github.com/wdc-molfar/molfar-monitor) та його окремих функцій.

## Вимоги до програмного модуля

Програмний модуль [`molfare-monitor`](https://github.com/wdc-molfar/molfare-node), що є RESTfull сервісом обробки запитів від мікросервісів для додавання їх до реєстру моніторингу та надсилання запитів до мікросервісів, повинен задовільнати наступним вимогам. 

Функціонування вищезазначеного програмного модуля **не має призводити до збою (фатального порушення роботи системи)** та **видавати діагностику стану системи та повідомлення про будь-які помилки, що виникли**:
- програмний модуль у відповідь на успішний `GET`-запит **"Отримати загальний опис сервісу"** повинен повернути сторінку загального опису, код відповіді – `200`
- програмний модуль у відповідь на невдалий `GET`-запит **"Отримати загальний опис сервісу"** повинен повернути сторінку статистики, код відповіді - `302`
- програмний модуль у відповідь на успішний `POST`-запит **"Перевірка стану роботи контейнера"** повинен повернути інформацію, щодо стану роботи контейнера, код успішної відповіді - `200`
- програмний модуль у відповідь на успішний `POST`-запит **"Реєстрація ноди"** повинен зареєструвати ноду, код відповіді – `200`
- програмний модуль у відповідь на невдалий `POST`-запит **"Реєстрація ноди"** пов'язаний з невизначеними даними повинен повернути інформацію про невдалий запит, код відповіді – `400`
- програмний модуль у відповідь на невдалий `POST`-запит **"Реєстрація ноди"** пов'язаний з невірним токеном повинен повернути інформацію про невдалий запит, код відповіді – `400`
- програмний модуль у відповідь на успішний `POST`-запит **"Перевірка статусу ноди"** повинен повернути інформацію про ноду, код відповіді – `200`
- програмний модуль у відповідь на невдалий `POST`-запит **"Перевірка статусу ноди"** пов'язаний з відсутністю ідентифікатора ноди повинен повернути інформацію про невдалий запит, код відповіді – `404`
- програмний модуль у відповідь на невдалий `POST`-запит **"Перевірка статусу ноди"** пов'язаний з невірним ідентифікатором ноди повинен повернути інформацію про невдалий запит, код відповіді – `400`
- програмний модуль у відповідь на успішний `GET`-запит **"Отримання метрик ноди"** повинен повернути інформацію про ноду, код відповіді – `200`
- програмний модуль у відповідь на невдалий `POST`-запит **"Отримання метрик ноди"** у зв'язку з невизначеними даними повинен повернути інформацію про невдалий запит, код відповіді – `400`
- програмний модуль у відповідь на невдалий `POST`-запит **"Отримання метрик ноди"** пов'язаний з невірним токеном повинен повернути інформацію про невдалий запит, код відповіді – `400`


## Вимоги до програмної документації

Склад програмної документації, пропонованої на випробуванні:
- [ГОСТ 19.402-78.](https://docs.cntd.ru/document/1200007652) ЕСПД. Опис програми
- [ГОСТ 19.301-79.](https://docs.cntd.ru/document/1200007650) ЕСПД. Програма та методика випробувань. Вимоги до змісту та оформлення
- [ГОСТ 19.401-78.](https://docs.cntd.ru/document/1200007651) ЕСПД. Текст програми. Вимоги до змісту та оформлення

Для запуску комплексів тестів використовуються менеджер пакетів для мови програмування JavaScript – `npm (Node Package Manager)`, та команда

```sh
npm test
```

Порядок проведення випробувань:
1. Виконати тест **"Тести для шляху "/""**, запустивши файл `root.test.js`
2. Виконати комплекс тестів **"Тести для шляху "/state""**, запустивши файл `state.test.js`
3. Виконати комплекс тестів **"Тести для шляху "/node""**, запустивши файл `node.test.js`

Для обробки результатів тестування та створення протоколу випробувань в HTML використовується `jest-html-reporters` версії [2.1.6](https://www.npmjs.com/package/jest-html-reporters/v/2.1.6).

## Методи випробувань

Для проведення випробувань пропонується наступий переліків комплексів тестів та окремих тестових прикладів:
- Тест **"Тести для шляху "/""**, що міститься у файлі `root.test.js` для перевірки запиту "Отримати загальний опис сервісу"
- Комплекс тестів **"Тести для шляху "/state""**, що міститься у файлі `state.test.js`
- Комплекс тестів **"Тести для шляху "/node""**, що містяться у файлі `node.test.js`, має наступні тестові приклади:
	- Тест перевірки запиту "Реєстрація ноди" - "Повинен зареєструвати ноду"
	- Тест перевірки запиту "Реєстрація ноди" - "Невизначені дані"
	- Тест перевірки запиту "Реєстрація ноди" - "Невірний токен"
	- Тест перевірки запиту "Перевірка статусу ноди" - "Повинен вернути інформацію про ноду"
	- Тест перевірки запиту "Перевірка статусу ноди" - "Ідентифікатор ноди відсутній"
	- Тест перевірки запиту "Перевірка статусу ноди" - "Невірний ідентифікатор ноди"
	- Тест перевірки запиту "Отримання метрик ноди" - "Невірний ідентифікатор ноди"
	- Тест перевірки запиту "Скасувати реєстрацію ноди" - "Повинен скасувати реєстрацію ноди"
	- Тест перевірки запиту "Скасувати реєстрацію ноди" - "Невизначені дані"
	- Тест перевірки запиту "Скасувати реєстрацію ноди" - "Невірний токен"

## Додаток

Вміст тестових файлів, результати тестування програмного модуля та розширена інформація про тестове покриття, яке в середньому склало `75.0`%, наведено в:

<a href="../testReport/test-report.html" target="blank">Протокол випробувань</a>

<a href="../coverage/lcov-report/index.html" target="blank">Тестове покриття</a>